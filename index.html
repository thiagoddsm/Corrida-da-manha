<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Corrida da Manhã</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
        :root {
            --background: 210 40% 98%; --foreground: 224 71.4% 4.1%; --card: 0 0% 100%;
            --card-foreground: 224 71.4% 4.1%; --popover: 0 0% 100%; --popover-foreground: 224 71.4% 4.1%;
            --primary: 217.2 91.2% 59.8%; --primary-foreground: 210 20% 98%; --secondary: 210 40% 96.1%;
            --secondary-foreground: 224 71.4% 4.1%; --muted: 210 40% 96.1%; --muted-foreground: 215 20.2% 65.1%;
            --accent: 24.6 95% 53.1%; --accent-foreground: 15 100% 98%; --destructive: 0 84.2% 60.2%;
            --destructive-foreground: 0 0% 98%; --border: 214.3 31.8% 91.4%; --input: 214.3 31.8% 91.4%;
            --ring: 217.2 91.2% 59.8%; --radius: 0.5rem;
        }
        body { background-color: hsl(var(--background)); color: hsl(var(--foreground)); }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
        .accordion-icon { transition: transform 0.3s ease; }
        .accordion-button.active .accordion-icon { transform: rotate(45deg); }
        .modal { transition: opacity 0.3s ease; }
        .map-container { position: relative; overflow: hidden; width: 100%; padding-top: 82.35%; }
        .map-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        border: 'hsl(var(--border))', input: 'hsl(var(--input))', ring: 'hsl(var(--ring))',
                        background: 'hsl(var(--background))', foreground: 'hsl(var(--foreground))',
                        primary: { DEFAULT: 'hsl(var(--primary))', foreground: 'hsl(var(--primary-foreground))' },
                        secondary: { DEFAULT: 'hsl(var(--secondary))', foreground: 'hsl(var(--secondary-foreground))' },
                        destructive: { DEFAULT: 'hsl(var(--destructive))', foreground: 'hsl(var(--destructive-foreground))' },
                        muted: { DEFAULT: 'hsl(var(--muted))', foreground: 'hsl(var(--muted-foreground))' },
                        accent: { DEFAULT: 'hsl(var(--accent))', foreground: 'hsl(var(--accent-foreground))' },
                        popover: { DEFAULT: 'hsl(var(--popover))', foreground: 'hsl(var(--popover-foreground))' },
                        card: { DEFAULT: 'hsl(var(--card))', foreground: 'hsl(var(--card-foreground))' }
                    },
                    borderRadius: { lg: "var(--radius)", md: "calc(var(--radius) - 2px)", sm: "calc(var(--radius) - 4px)" },
                }
            }
        }
    </script>
</head>
<body class="bg-background text-foreground antialiased">

    <header class="sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur">
         <div class="container flex h-14 items-center mx-auto px-6">
            <div class="mr-4 hidden md:flex">
                <a href="#" class="mr-6 flex items-center space-x-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg>
                    <span class="font-bold sm:inline-block">Corrida da Manhã</span>
                </a>
                <nav class="flex items-center space-x-6 text-sm font-medium">
                    <a href="#evento" class="transition-colors hover:text-foreground/80 text-foreground/60">Evento</a>
                    <a href="#percurso" class="transition-colors hover:text-foreground/80 text-foreground/60">Percurso</a>
                    <a href="#inscricao" class="transition-colors hover:text-foreground/80 text-foreground/60">Inscrição</a>
                    <a href="#patrocinadores" class="transition-colors hover:text-foreground/80 text-foreground/60">Patrocinadores</a>
                </nav>
            </div>
        </div>
    </header>

    <section class="relative h-[60vh] md:h-[70vh] text-white shadow-lg flex items-center justify-center text-center">
        <img src="https://images.unsplash.com/photo-1627592583556-13651eba2164?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHwzfHxydW5uZXJzJTIwc3VucmlzZXxlbnwwfHx8fDE3NTkwNjAyMTF8MA&ixlib=rb-4.1.0&q=80&w=1080" alt="Corredores ao nascer do sol" class="absolute inset-0 w-full h-full object-cover">
        <div class="absolute inset-0 bg-black/60"></div>
        <div class="relative container mx-auto px-6 py-20">
            <h1 class="text-4xl md:text-6xl font-bold mb-2" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.7)">CORRIDA DA MANHÃ</h1>
            <p class="text-2xl md:text-3xl font-semibold text-amber-400" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.7)">1ª Edição</p>
            <p class="text-xl md:text-2xl mt-4" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.5)">Organizada pela Igreja Batista da Manhã</p>
        </div>
    </section>

    <main class="container mx-auto px-6 py-12">
        <section id="evento" class="text-center my-16">
            <h2 class="text-3xl font-bold text-primary mb-6" style="color: hsl(var(--primary));">Prepare-se! A Corrida da Manhã está chegando!</h2>
            <p class="max-w-3xl mx-auto text-lg mb-8 text-foreground/80">No dia <strong>16 de novembro</strong>, junte-se a nós para a primeira edição da nossa corrida! Teremos a Caminhada da Família e uma corrida, unindo pessoas de todas as idades em um ritmo de saúde, alegria e superação.</p>
            <div class="flex flex-wrap justify-center gap-8">
                <div class="min-w-[280px] text-center shadow-md rounded-lg border bg-card text-card-foreground p-6"><h3 class="flex items-center justify-center gap-2 font-semibold text-2xl tracking-tight">Data e Hora</h3><p class="text-lg text-foreground/90 pt-4">16 de Novembro - A partir das 7h</p></div>
                <div class="min-w-[280px] text-center shadow-md rounded-lg border bg-card text-card-foreground p-6"><h3 class="flex items-center justify-center gap-2 font-semibold text-2xl tracking-tight">Distâncias</h3><p class="text-lg text-foreground/90 pt-4">1km Caminhada | 3.5km Corrida</p></div>
                <div class="min-w-[280px] text-center shadow-md rounded-lg border bg-card text-card-foreground p-6"><h3 class="flex items-center justify-center gap-2 font-semibold text-2xl tracking-tight">Premiação</h3><p class="text-lg text-foreground/90 pt-4">1º ao 3º Lugar (M/F) | Categoria PCD</p></div>
            </div>
            <div class="mt-12 max-w-3xl mx-auto p-6 rounded-lg border-2 border-accent" style="background-color: hsl(var(--accent)/0.1); color: hsl(var(--accent))">
                 <h3 class="font-bold text-xl flex items-center justify-center gap-3"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6"><path d="m12 14 4-4"></path><path d="M3.34 19a10 10 0 1 1 17.32 0"></path></svg> Inclusão e Acessibilidade</h3>
                 <p class="mt-2 text-foreground/90">A largada para atletas da categoria PCD (Pessoas com Deficiência) acontecerá 5 minutos antes da largada geral.</p>
            </div>
        </section>

        <section id="programacao" class="my-16">
            <h2 class="text-3xl font-bold text-center mb-8" style="color: hsl(var(--primary));">Programação do Dia</h2>
            <div class="max-w-3xl mx-auto shadow-lg rounded-lg border bg-card text-card-foreground">
                <div class="p-8 space-y-6">
                    <div class="flex items-center"><p class="text-xl font-bold w-24" style="color: hsl(var(--primary)/0.8);">7:00h</p><p class="text-lg text-foreground/90">Concentração</p></div>
                    <div class="flex items-center"><p class="text-xl font-bold w-24" style="color: hsl(var(--primary)/0.8);">8:00h</p><p class="text-lg text-foreground/90">Largada da Caminhada</p></div>
                    <div class="flex items-center"><p class="text-xl font-bold w-24" style="color: hsl(var(--primary)/0.8);">8:30h</p><p class="text-lg text-foreground/90">Largada da Corrida</p></div>
                    <div class="flex items-center"><p class="text-xl font-bold w-24" style="color: hsl(var(--primary)/0.8);">9:15h</p><p class="text-lg text-foreground/90">Cerimônia de Premiação</p></div>
                    <div class="flex items-center"><p class="text-xl font-bold w-24" style="color: hsl(var(--primary)/0.8);">10:15h</p><p class="text-lg text-foreground/90">Culto de Celebração</p></div>
                </div>
            </div>
        </section>

        <section id="percurso" class="my-16">
            <h2 class="text-3xl font-bold text-center text-primary mb-8" style="color: hsl(var(--primary));">Conheça os Percursos</h2>
            <div class="shadow-lg rounded-lg border bg-card text-card-foreground">
                <div class="p-6 grid md:grid-cols-2 gap-8">
                    <div class="text-center"><h3 class="text-2xl font-bold mb-4">Corrida 3.5km</h3><div class="map-container rounded-lg overflow-hidden shadow-md"><iframe src="https://onthegomap.com/?m=r&u=km&d=3564&f=5394f9659b&n=1&dm=1&e&context=embed&r2=vrfh4Xjtc8Ua7s1y5i4o7c4q7a3cBs1w71m9o4cEW5c6w7a8o2i3s3kCe4qGCs48m2_2i6i1u5c2qAKw4d1a3t1o1l7k3j4y1d1e1Js21W6Dm2t4c7Lc3l5T"></iframe></div></div>
                    <div class="text-center"><h3 class="text-2xl font-bold mb-4">Caminhada 1km</h3><div class="map-container rounded-lg overflow-hidden shadow-md"><iframe src="https://onthegomap.com/?m=r&u=km&d=1122&f=5394f9659b&n=1&dm=1&e&context=embed&r2=lbeh4rbpc8c3eGX1m3n2i2r9g4x2w1H_5Dm4X5c8BW3l5X1"></iframe></div></div>
                </div>
            </div>
        </section>
        
        <section id="inscricao" class="my-16">
            <h2 class="text-3xl font-bold text-center text-primary mb-8" style="color: hsl(var(--primary));">Faça sua Inscrição</h2>
             <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                <div class="text-center transform hover:scale-105 transition-transform duration-300 shadow-lg rounded-lg border-4 border-amber-400 bg-card text-card-foreground shadow-2xl p-6">
                    <h3 class="text-2xl font-bold text-amber-500">KIT COMPLETO</h3>
                    <p class="text-4xl font-bold my-2">R$ 100,00</p>
                    <ul class="text-left space-y-2 mb-6 inline-block">
                        <li class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 text-green-500"><path d="M20 6 9 17l-5-5"></path></svg><span>Camisa, Número de peito, Medalha</span></li>
                    </ul>
                </div>
                <div class="text-center transform hover:scale-105 transition-transform duration-300 shadow-lg rounded-lg bg-card text-card-foreground p-6">
                    <h3 class="text-2xl font-bold">KIT BÁSICO</h3>
                     <p class="text-4xl font-bold my-2">R$ 55,00</p>
                    <ul class="text-left space-y-2 mb-6 inline-block">
                         <li class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 text-green-500"><path d="M20 6 9 17l-5-5"></path></svg><span>Número de peito, Medalha</span></li>
                    </ul>
                </div>
            </div>
            <div class="text-center mt-8">
                <button id="open-registration-modal-btn" class="bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-4 px-10 rounded-full text-xl shadow-lg">Inscreva-se Agora!</button>
            </div>
        </section>

        <section id="regulamento" class="my-16">
            <div class="shadow-lg rounded-lg border bg-card text-card-foreground">
                <div class="p-6"><h3 class="text-3xl font-bold text-center text-primary" style="color: hsl(var(--primary));">Regulamento da Corrida</h3></div>
                <div class="px-4 md:px-8 pb-8 space-y-2" id="accordion-container"></div>
            </div>
        </section>
    </main>

    <section id="patrocinadores" class="py-12" style="background-color: hsl(var(--secondary));">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl font-bold text-center text-primary mb-2" style="color: hsl(var(--primary));">Seja um Patrocinador</h2>
            <p class="text-center text-lg max-w-2xl mx-auto mb-10 text-foreground/80">Associe sua marca a um evento que promove saúde, bem-estar e comunidade. Conheça nossas cotas de patrocínio!</p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="p-6 rounded-xl shadow-xl text-center flex flex-col border-2 bg-yellow-400/20 border-yellow-500">
                    <h3 class="text-2xl font-bold mb-2 text-yellow-800">OURO</h3>
                    <p class="text-xl font-semibold mb-4 text-yellow-800">A partir de R$ 750</p>
                    <ul class="space-y-2 font-medium text-left flex-grow text-foreground/90">
                         <li class="flex items-start gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 mt-1 shrink-0 text-green-600"><path d="M20 6 9 17l-5-5"></path></svg><span>Logo em um dos pórticos</span></li>
                        <li class="flex items-start gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 mt-1 shrink-0 text-green-600"><path d="M20 6 9 17l-5-5"></path></svg><span>Logo no número de peito</span></li>
                        <li class="flex items-start gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 mt-1 shrink-0 text-green-600"><path d="M20 6 9 17l-5-5"></path></svg><span>Logo em Banner do evento</span></li>
                        <li class="flex items-start gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 mt-1 shrink-0 text-green-600"><path d="M20 6 9 17l-5-5"></path></svg><span>Logo na Camisa oficial (destaque)*</span></li>
                        <li class="flex items-start gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 mt-1 shrink-0 text-green-600"><path d="M20 6 9 17l-5-5"></path></svg><span>Divulgação nas Redes Sociais</span></li>
                    </ul>
                </div>
                <div class="p-6 rounded-xl shadow-xl text-center flex flex-col border-2 bg-slate-300/20 border-slate-400">
                     <h3 class="text-2xl font-bold mb-2 text-slate-800">PRATA</h3>
                    <p class="text-xl font-semibold mb-4 text-slate-800">A partir de R$ 450</p>
                    <ul class="space-y-2 font-medium text-left flex-grow text-foreground/90">
                        <li class="flex items-start gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 mt-1 shrink-0 text-green-600"><path d="M20 6 9 17l-5-5"></path></svg><span>Logo em Banner do evento</span></li>
                        <li class="flex items-start gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 mt-1 shrink-0 text-green-600"><path d="M20 6 9 17l-5-5"></path></svg><span>Logo na Camisa oficial*</span></li>
                        <li class="flex items-start gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 mt-1 shrink-0 text-green-600"><path d="M20 6 9 17l-5-5"></path></svg><span>Divulgação nas Redes Sociais</span></li>
                    </ul>
                </div>
                <div class="p-6 rounded-xl shadow-xl text-center flex flex-col border-2 bg-orange-400/20 border-orange-500">
                    <h3 class="text-2xl font-bold mb-2 text-orange-800">BRONZE</h3>
                    <p class="text-xl font-semibold mb-4 text-orange-800">R$ 150</p>
                    <ul class="space-y-2 font-medium text-left flex-grow text-foreground/90">
                        <li class="flex items-start gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 mt-1 shrink-0 text-green-600"><path d="M20 6 9 17l-5-5"></path></svg><span>Divulgação nas Redes Sociais</span></li>
                    </ul>
                </div>
            </div>
            <p class="text-center text-sm text-muted-foreground mt-6">*Nem todos os corredores usarão a camisa oficial do evento.</p>
            <div class="text-center mt-10">
                <button id="open-sponsorship-modal-btn" class="bg-green-600 text-white font-bold py-3 px-8 rounded-full text-lg hover:bg-green-700 transition-colors duration-300 shadow-md h-auto">Quero Patrocinar</button>
            </div>
        </div>
    </section>
    
    <footer class="text-primary-foreground text-center py-8" style="background-color: hsl(var(--primary)/0.9); color: hsl(var(--primary-foreground));">
        <div class="container mx-auto">
        <p class="font-bold text-lg">Corrida da Manhã</p>
        <p class="text-sm">Uma iniciativa da Igreja Batista da Manhã.</p>
        <div class="mt-4">
          <a href="https://www.instagram.com/pibargrunning?igsh=aWQ2MmJ5dGNiMHc1" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 text-amber-300 hover:text-amber-400 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"></line></svg>
            Siga-nos no Instagram
          </a>
        </div>
      </div>
    </footer>

    <!-- Modal de Patrocínio -->
    <div id="sponsorship-modal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4 hidden opacity-0">
        <div class="bg-card rounded-lg shadow-2xl w-full max-w-lg mx-auto" id="sponsorship-modal-content"></div>
    </div>

    <!-- Modal de Inscrição -->
    <div id="registration-modal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4 hidden opacity-0">
        <div class="bg-card rounded-lg shadow-2xl w-full max-w-lg mx-auto" id="registration-modal-content"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // URL do seu Google Apps Script (não precisa mudar)
            const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwD649MmpaS1BA7g1LXefMPlcSpUxeomlfsiggQ_-Q-aLvYrh3TCbMxWFI_9m1VpJTxMw/exec';

            // --- Lógica do Acordeão ---
            const regulations = [
                { title: "1. A Prova", content: "A Corrida da Manhã, 1ª edição, será realizada no dia 16 de novembro. As distâncias são 1km para Caminhada e 3.5km para Corrida. Largada da caminhada às 8:00h e da corrida às 8:30h." },
                { title: "2. Inscrições", content: "As inscrições serão online. O período de inscrição será divulgado em breve. A inscrição é pessoal e intransferível, sem reembolso em caso de desistência." },
                { title: "3. Kit do Atleta", content: "A entrega dos kits ocorrerá em data e local a serem definidos. Para retirar, apresente um documento com foto. O kit varia conforme a modalidade escolhida." },
                { title: "4. Premiação", content: "Todos que completarem o percurso receberão medalha. Haverá troféus para os 3 primeiros colocados gerais (M/F) na corrida de 3.5km. Não haverá premiação por faixa etária." },
                { title: "5. Categoria PCD", content: "Haverá categoria para Pessoas com Deficiência (PCD) com premiação específica. A largada para atletas PCD será 5 minutos antes da largada geral." },
                { title: "6. Disposições Gerais", content: "Ao participar, o atleta aceita o Regulamento e cede os direitos de uso de sua imagem para divulgação. Haverá serviço de ambulância para emergências." }
            ];
            const accordionContainer = document.getElementById('accordion-container');
            if (accordionContainer) {
                 regulations.forEach(item => {
                    const accordionItem = document.createElement('div');
                    accordionItem.className = 'border-b';
                    accordionItem.innerHTML = `<button class="accordion-button w-full flex justify-between items-center text-left py-4 px-2 hover:bg-secondary focus:outline-none"><span class="font-semibold text-lg">${item.title}</span><svg class="accordion-icon h-6 w-6 text-primary shrink-0" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg></button><div class="accordion-content"><p class="p-4 text-foreground/80">${item.content}</p></div>`;
                    accordionContainer.appendChild(accordionItem);
                });
                document.querySelectorAll('.accordion-button').forEach(button => {
                    button.addEventListener('click', () => {
                        const content = button.nextElementSibling;
                        const isActive = button.classList.contains('active');
                        document.querySelectorAll('.accordion-content').forEach(c => c.style.maxHeight = null);
                        document.querySelectorAll('.accordion-button').forEach(b => b.classList.remove('active'));
                        if (!isActive) {
                            button.classList.add('active');
                            content.style.maxHeight = content.scrollHeight + "px";
                        }
                    });
                });
            }

            // --- Gerenciador de Modais ---
            const sponsorshipModal = {
                element: document.getElementById('sponsorship-modal'),
                content: document.getElementById('sponsorship-modal-content'),
                openBtn: document.getElementById('open-sponsorship-modal-btn'),
                formHTML: `
                    <div class="p-6 relative">
                        <button class="close-modal-btn absolute top-4 right-4 text-muted-foreground hover:text-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
                        <h3 class="text-2xl font-bold text-primary mb-4">Seja um Patrocinador</h3>
                        <p class="text-muted-foreground mb-6">Preencha o formulário e nossa equipe entrará em contato.</p>
                        <form id="sponsorship-form">
                            <div class="space-y-4">
                                <div><label for="company-name" class="block text-sm font-medium text-foreground/90 mb-1">Nome da Empresa</label><input type="text" id="company-name" name="companyName" required class="w-full px-3 py-2 border rounded-md bg-transparent border-border focus:ring-2 focus:ring-ring focus:outline-none"></div>
                                <div><label for="contact-name" class="block text-sm font-medium text-foreground/90 mb-1">Seu Nome</label><input type="text" id="contact-name" name="contactName" required class="w-full px-3 py-2 border rounded-md bg-transparent border-border focus:ring-2 focus:ring-ring focus:outline-none"></div>
                                <div><label for="email" class="block text-sm font-medium text-foreground/90 mb-1">E-mail</label><input type="email" id="email" name="email" required class="w-full px-3 py-2 border rounded-md bg-transparent border-border focus:ring-2 focus:ring-ring focus:outline-none"></div>
                                <div><label for="phone" class="block text-sm font-medium text-foreground/90 mb-1">Telefone / WhatsApp</label><input type="tel" id="phone" name="phone" required class="w-full px-3 py-2 border rounded-md bg-transparent border-border focus:ring-2 focus:ring-ring focus:outline-none"></div>
                                <div><label for="tier" class="block text-sm font-medium text-foreground/90 mb-1">Cota de Interesse</label><select id="tier" name="tier" required class="w-full px-3 py-2 border rounded-md bg-transparent border-border focus:ring-2 focus:ring-ring focus:outline-none"><option value="" disabled selected>Selecione</option><option value="Ouro">Ouro</option><option value="Prata">Prata</option><option value="Bronze">Bronze</option></select></div>
                                <div><label for="logo-upload" class="block text-sm font-medium text-foreground/90 mb-1">Logo da Empresa</label><input type="file" id="logo-upload" name="logo" accept="image/*" class="w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary/10 file:text-primary hover:file:bg-primary/20"/></div>
                            </div>
                            <div class="mt-8 text-right"><button type="submit" class="submit-btn bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-6 rounded-md shadow-md transition-colors inline-flex items-center gap-2">Ir para Pagamento</button></div>
                        </form>
                    </div>`
            };

            const registrationModal = {
                element: document.getElementById('registration-modal'),
                content: document.getElementById('registration-modal-content'),
                openBtn: document.getElementById('open-registration-modal-btn'),
                formHTML: `
                    <div class="p-6 relative">
                        <button class="close-modal-btn absolute top-4 right-4 text-muted-foreground hover:text-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
                        <h3 class="text-2xl font-bold text-primary mb-4">Formulário de Inscrição</h3>
                        <form id="registration-form">
                            <div class="space-y-4">
                                <div><label for="fullName" class="block text-sm font-medium">Nome Completo</label><input type="text" id="fullName" name="fullName" required class="w-full mt-1 p-2 border rounded-md bg-transparent border-border focus:ring-2 focus:ring-ring"></div>
                                <div><label for="age" class="block text-sm font-medium">Idade</label><input type="number" id="age" name="age" required class="w-full mt-1 p-2 border rounded-md bg-transparent border-border focus:ring-2 focus:ring-ring"></div>
                                <div><label for="cpf" class="block text-sm font-medium">CPF</label><input type="text" id="cpf" name="cpf" required class="w-full mt-1 p-2 border rounded-md bg-transparent border-border focus:ring-2 focus:ring-ring"></div>
                                <div><label for="email" class="block text-sm font-medium">E-mail</label><input type="email" id="email" name="email" required class="w-full mt-1 p-2 border rounded-md bg-transparent border-border focus:ring-2 focus:ring-ring"></div>
                                <div><label for="phone" class="block text-sm font-medium">Telefone (WhatsApp)</label><input type="tel" id="phone" name="phone" class="w-full mt-1 p-2 border rounded-md bg-transparent border-border focus:ring-2 focus:ring-ring"></div>
                                <fieldset class="pt-2"><legend class="text-sm font-medium">Selecione o Kit</legend>
                                    <div class="mt-2 space-y-2">
                                        <div class="flex items-center gap-x-3"><input id="kit-basico" name="kit" type="radio" value="Básico" required class="h-4 w-4 border-gray-300 text-primary focus:ring-primary"><label for="kit-basico">Kit Básico (R$ 55,00)</label></div>
                                        <div class="flex items-center gap-x-3"><input id="kit-completo" name="kit" type="radio" value="Completo" required class="h-4 w-4 border-gray-300 text-primary focus:ring-primary"><label for="kit-completo">Kit Completo (R$ 100,00)</label></div>
                                    </div>
                                </fieldset>
                                <div id="shirt-size-wrapper" class="hidden"><label for="shirtSize" class="block text-sm font-medium">Tamanho da Camisa</label><select id="shirtSize" name="shirtSize" class="w-full mt-1 p-2 border rounded-md bg-transparent border-border focus:ring-2 focus:ring-ring"><option>P</option><option>M</option><option>G</option><option>GG</option></select></div>
                            </div>
                            <div class="mt-8 text-right"><button type="submit" class="submit-btn bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-6 rounded-md shadow-md transition-colors inline-flex items-center gap-2">Ir para Pagamento</button></div>
                        </form>
                    </div>`
            };

            function initModal(modalConfig) {
                if (modalConfig.openBtn) {
                    modalConfig.openBtn.addEventListener('click', () => openModal(modalConfig));
                }
            }
            
            function openModal(modalConfig) {
                modalConfig.content.innerHTML = modalConfig.formHTML;
                modalConfig.element.classList.remove('hidden');
                setTimeout(() => modalConfig.element.classList.remove('opacity-0'), 10);
                setupModalListeners(modalConfig);
            }

            function closeModal(modalConfig) {
                modalConfig.element.classList.add('opacity-0');
                setTimeout(() => modalConfig.element.classList.add('hidden'), 300);
            }

            function setupModalListeners(modalConfig) {
                 modalConfig.element.querySelector('.close-modal-btn').addEventListener('click', () => closeModal(modalConfig));
                 modalConfig.element.addEventListener('click', e => { if(e.target === modalConfig.element) closeModal(modalConfig); });
                 
                 const form = modalConfig.content.querySelector('form');
                 form.addEventListener('submit', handleFormSubmit);

                 if (modalConfig === registrationModal) {
                    form.querySelectorAll('input[name="kit"]').forEach(radio => {
                        radio.addEventListener('change', e => {
                            const shirtWrapper = form.querySelector('#shirt-size-wrapper');
                            shirtWrapper.classList.toggle('hidden', e.target.value !== 'Completo');
                        });
                    });
                 }
            }

            function showLoading(form) {
                const submitBtn = form.querySelector('.submit-btn');
                submitBtn.disabled = true;
                submitBtn.innerHTML = `<svg class="animate-spin -ml-1 mr-3 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Processando...`;
            }
            
            function showError(form, message = 'Ocorreu um erro.') {
                const modalContent = form.parentElement;
                modalContent.innerHTML = `<div class="p-8 text-center"><h3 class="text-2xl font-bold text-destructive mb-4">Erro!</h3><p class="text-muted-foreground">${message} Por favor, feche e tente novamente.</p></div>`;
            }

            function handleFormSubmit(e) {
                e.preventDefault();
                const form = e.target;
                showLoading(form);

                const fileInput = form.querySelector('input[type="file"]');
                if (fileInput && fileInput.files.length > 0) {
                    const file = fileInput.files[0];
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const fileData = {
                            name: file.name,
                            type: file.type,
                            base64: e.target.result.split(',')[1]
                        };
                        sendData(form, fileData);
                    };
                    reader.onerror = function(error) {
                         showError(form, 'Falha ao ler o arquivo.');
                         console.error('FileReader error: ', error);
                    }
                    reader.readAsDataURL(file);
                } else {
                    sendData(form, null);
                }
            }
            
            async function sendData(form, fileData) {
                const formData = new FormData(form);
                if(fileData) formData.delete('logo'); 
                const data = Object.fromEntries(formData.entries());

                const formType = form.id === 'registration-form' ? 'registration' : 'sponsorship';
                const payload = { formType: formType, formData: data, fileData: fileData };

                try {
                    const response = await fetch(SCRIPT_URL, {
                        method: 'POST',
                        body: JSON.stringify(payload),
                        headers: { 'Content-Type': 'application/json' }
                    });

                    if (!response.ok) {
                       const errorText = await response.text();
                       throw new Error(`Erro do servidor: ${response.status} ${errorText}`);
                    }

                    const result = await response.json();

                    if (result.status === 'success' && result.paymentUrl) {
                        const modalContent = form.parentElement;
                        modalContent.innerHTML = `<div class="p-8 text-center"><h3 class="text-2xl font-bold text-primary mb-4">Obrigado!</h3><p class="text-muted-foreground">Sua solicitação foi enviada. Redirecionando para o pagamento...</p></div>`;
                        window.location.href = result.paymentUrl;
                    } else {
                        throw new Error(result.message || 'O servidor retornou uma resposta inesperada.');
                    }
                } catch (error) {
                    console.error('Erro ao submeter formulário:', error);
                    showError(form, error.message);
                }
            }
            
            // Inicializa os modais
            initModal(sponsorshipModal);
            initModal(registrationModal);
        });
    </script>
</body>
</html>

