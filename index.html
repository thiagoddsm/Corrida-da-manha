<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Corrida da Manhã</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
        :root {
            --background: 210 40% 98%; --foreground: 224 71.4% 4.1%; --card: 0 0% 100%;
            --card-foreground: 224 71.4% 4.1%; --popover: 0 0% 100%; --popover-foreground: 224 71.4% 4.1%;
            --primary: 217.2 91.2% 59.8%; --primary-foreground: 210 20% 98%; --secondary: 210 40% 96.1%;
            --secondary-foreground: 224 71.4% 4.1%; --muted: 210 40% 96.1%; --muted-foreground: 215 20.2% 65.1%;
            --accent: 24.6 95% 53.1%; --accent-foreground: 15 100% 98%; --destructive: 0 84.2% 60.2%;
            --destructive-foreground: 0 0% 98%; --border: 214.3 31.8% 91.4%; --input: 214.3 31.8% 91.4%;
            --ring: 217.2 91.2% 59.8%; --radius: 0.5rem;
        }
        body { background-color: hsl(var(--background)); color: hsl(var(--foreground)); }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
        .accordion-icon { transition: transform 0.3s ease; }
        .accordion-button.active .accordion-icon { transform: rotate(45deg); }
        .modal { transition: opacity 0.3s ease; }
        .map-container { position: relative; overflow: hidden; width: 100%; padding-top: 82.35%; }
        .map-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        border: 'hsl(var(--border))', input: 'hsl(var(--input))', ring: 'hsl(var(--ring))',
                        background: 'hsl(var(--background))', foreground: 'hsl(var(--foreground))',
                        primary: { DEFAULT: 'hsl(var(--primary))', foreground: 'hsl(var(--primary-foreground))' },
                        secondary: { DEFAULT: 'hsl(var(--secondary))', foreground: 'hsl(var(--secondary-foreground))' },
                        destructive: { DEFAULT: 'hsl(var(--destructive))', foreground: 'hsl(var(--destructive-foreground))' },
                        muted: { DEFAULT: 'hsl(var(--muted))', foreground: 'hsl(var(--muted-foreground))' },
                        accent: { DEFAULT: 'hsl(var(--accent))', foreground: 'hsl(var(--accent-foreground))' },
                        popover: { DEFAULT: 'hsl(var(--popover))', foreground: 'hsl(var(--popover-foreground))' },
                        card: { DEFAULT: 'hsl(var(--card))', foreground: 'hsl(var(--card-foreground))' }
                    },
                    borderRadius: { lg: "var(--radius)", md: "calc(var(--radius) - 2px)", sm: "calc(var(--radius) - 4px)" },
                }
            }
        }
    </script>
</head>
<body class="bg-background text-foreground antialiased">

    <!-- Header -->
    <header class="sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur">
       <!-- ... (conteúdo do header omitido para brevidade) ... -->
    </header>

    <!-- Hero -->
    <section class="relative h-[60vh] md:h-[70vh] text-white shadow-lg flex items-center justify-center text-center">
        <!-- ... (conteúdo do hero omitido para brevidade) ... -->
    </section>

    <main class="container mx-auto px-6 py-12">
        <!-- ... (seções Evento, Programação, Percurso omitidas para brevidade) ... -->
        
        <!-- Registration -->
        <section id="inscricao" class="my-16">
            <h2 class="text-3xl font-bold text-center text-primary mb-8" style="color: hsl(var(--primary));">Faça sua Inscrição</h2>
             <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                <div class="text-center transform hover:scale-105 transition-transform duration-300 shadow-lg rounded-lg border-4 border-amber-400 shadow-2xl p-6">
                    <h3 class="text-2xl font-bold text-amber-500">KIT COMPLETO</h3>
                    <p class="text-4xl font-bold mb-2">R$ 100,00</p>
                    <ul class="text-left space-y-2 mb-6 inline-block">
                        <li class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 text-green-500"><path d="M20 6 9 17l-5-5"></path></svg><span>Camisa, Número de peito, Medalha</span></li>
                    </ul>
                </div>
                <div class="text-center transform hover:scale-105 transition-transform duration-300 shadow-lg rounded-lg p-6">
                    <h3 class="text-2xl font-bold">KIT BÁSICO</h3>
                     <p class="text-4xl font-bold mb-2">R$ 55,00</p>
                    <ul class="text-left space-y-2 mb-6 inline-block">
                         <li class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 text-green-500"><path d="M20 6 9 17l-5-5"></path></svg><span>Número de peito, Medalha</span></li>
                    </ul>
                </div>
            </div>
            <div class="text-center mt-8">
                <button id="open-registration-modal-btn" class="bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-4 px-10 rounded-full text-xl shadow-lg">Inscreva-se Agora!</button>
            </div>
        </section>

        <!-- ... (seção Regulamento omitida para brevidade) ... -->
    </main>

    <!-- Sponsorship -->
    <section id="patrocinadores" class="py-12" style="background-color: hsl(var(--secondary));">
       <!-- ... (conteúdo de patrocinadores omitido para brevidade) ... -->
    </section>
    
    <!-- Footer -->
    <footer class="text-primary-foreground text-center py-8" style="background-color: hsl(var(--primary)/0.9); color: hsl(var(--primary-foreground));">
      <!-- ... (conteúdo do footer omitido para brevidade) ... -->
    </footer>

    <!-- Modal de Patrocínio -->
    <div id="sponsorship-modal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4 hidden opacity-0">
        <div class="bg-card rounded-lg shadow-2xl w-full max-w-lg mx-auto" id="sponsorship-modal-content"></div>
    </div>

    <!-- NOVO: Modal de Inscrição -->
    <div id="registration-modal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4 hidden opacity-0">
        <div class="bg-card rounded-lg shadow-2xl w-full max-w-lg mx-auto" id="registration-modal-content"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwdXTFk3FNsO1VdH5OLkCN4-kvbUOToPBAEuLGSLgwiLMO8P-bcObTejy-RoP7tt7xrRA/exec';
            
            // --- Lógica do Acordeão (sem alterações) ---
            // ...

            // --- Gerenciador de Modais ---
            const sponsorshipModal = {
                element: document.getElementById('sponsorship-modal'),
                content: document.getElementById('sponsorship-modal-content'),
                openBtn: document.getElementById('open-modal-btn'),
                formHTML: `<!-- HTML do formulário de patrocínio aqui -->` // Omitido para brevidade
            };

            const registrationModal = {
                element: document.getElementById('registration-modal'),
                content: document.getElementById('registration-modal-content'),
                openBtn: document.getElementById('open-registration-modal-btn'),
                formHTML: `
                    <div class="p-6 relative">
                        <button class="close-modal-btn absolute top-4 right-4 text-muted-foreground hover:text-foreground">&times;</button>
                        <h3 class="text-2xl font-bold text-primary mb-4">Formulário de Inscrição</h3>
                        <form id="registration-form">
                            <div class="space-y-4">
                                <div><label for="fullName" class="block text-sm font-medium">Nome Completo</label><input type="text" id="fullName" name="fullName" required class="w-full mt-1 p-2 border rounded-md"></div>
                                <div><label for="cpf" class="block text-sm font-medium">CPF</label><input type="text" id="cpf" name="cpf" required class="w-full mt-1 p-2 border rounded-md"></div>
                                <div><label for="email" class="block text-sm font-medium">E-mail</label><input type="email" id="email" name="email" required class="w-full mt-1 p-2 border rounded-md"></div>
                                <div><label for="phone" class="block text-sm font-medium">Telefone (WhatsApp)</label><input type="tel" id="phone" name="phone" class="w-full mt-1 p-2 border rounded-md"></div>
                                <fieldset class="pt-2"><legend class="text-sm font-medium">Selecione o Kit</legend>
                                    <div class="mt-2 space-y-2">
                                        <div class="flex items-center gap-x-3"><input id="kit-basico" name="kit" type="radio" value="Básico" required class="h-4 w-4"><label for="kit-basico">Kit Básico (R$ 55,00)</label></div>
                                        <div class="flex items-center gap-x-3"><input id="kit-completo" name="kit" type="radio" value="Completo" required class="h-4 w-4"><label for="kit-completo">Kit Completo (R$ 100,00)</label></div>
                                    </div>
                                </fieldset>
                                <div id="shirt-size-wrapper" class="hidden"><label for="shirtSize" class="block text-sm font-medium">Tamanho da Camisa</label><select id="shirtSize" name="shirtSize" class="w-full mt-1 p-2 border rounded-md"><option>P</option><option>M</option><option>G</option><option>GG</option></select></div>
                            </div>
                            <div class="mt-8 text-right"><button type="submit" class="submit-btn bg-primary text-primary-foreground font-bold py-2 px-6 rounded-md">Ir para Pagamento</button></div>
                        </form>
                    </div>`
            };

            function initModal(modalConfig) {
                modalConfig.openBtn.addEventListener('click', () => openModal(modalConfig));
            }

            function openModal(modalConfig) {
                modalConfig.content.innerHTML = modalConfig.formHTML;
                modalConfig.element.classList.remove('hidden');
                setTimeout(() => modalConfig.element.classList.remove('opacity-0'), 10);
                setupModalListeners(modalConfig);
            }

            function closeModal(modalConfig) {
                modalConfig.element.classList.add('opacity-0');
                setTimeout(() => modalConfig.element.classList.add('hidden'), 300);
            }

            function setupModalListeners(modalConfig) {
                 modalConfig.element.querySelector('.close-modal-btn').addEventListener('click', () => closeModal(modalConfig));
                 modalConfig.element.addEventListener('click', e => { if(e.target === modalConfig.element) closeModal(modalConfig); });
                 
                 if (modalConfig === registrationModal) {
                    const form = modalConfig.content.querySelector('#registration-form');
                    form.addEventListener('submit', handleRegistrationSubmit);
                    form.querySelectorAll('input[name="kit"]').forEach(radio => {
                        radio.addEventListener('change', e => {
                            const shirtWrapper = form.querySelector('#shirt-size-wrapper');
                            shirtWrapper.classList.toggle('hidden', e.target.value !== 'Completo');
                        });
                    });
                 }
                 // Adicionar aqui a lógica para o formulário de patrocínio se necessário
            }

            async function handleRegistrationSubmit(e) {
                e.preventDefault();
                const form = e.target;
                const submitBtn = form.querySelector('.submit-btn');
                submitBtn.disabled = true;
                submitBtn.textContent = 'Aguarde...';

                const formData = new FormData(form);
                const data = Object.fromEntries(formData.entries());

                const payload = {
                    formType: 'registration',
                    formData: data
                };
                
                try {
                    const response = await fetch(SCRIPT_URL, {
                        method: 'POST',
                        mode: 'no-cors',
                        body: JSON.stringify(payload)
                    });
                    
                    // Sucesso: Redirecionar para o Asaas
                    const paymentLinks = {
                        'Básico': 'https://link-de-pagamento-do-asaas-para-kit-basico.com',
                        'Completo': 'https://link-de-pagamento-do-asaas-para-kit-completo.com'
                    };
                    
                    form.innerHTML = `<div class="p-8 text-center">Inscrição registrada! Redirecionando para o pagamento...</div>`;
                    window.location.href = paymentLinks[data.kit];

                } catch (error) {
                    form.innerHTML = `<div class="p-8 text-center">Ocorreu um erro. Tente novamente.</div>`;
                    console.error('Erro:', error);
                }
            }

            initModal(sponsorshipModal);
            initModal(registrationModal);
        });
    </script>
</body>
</html>

